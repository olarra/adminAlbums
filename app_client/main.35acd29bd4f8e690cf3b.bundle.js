webpackJsonp([1,5],{"+3N3":function(t,e,n){"use strict";var o=n("3j3K"),r=n("aKqg");n.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.albumService=t,this.isLoading=!0}return t.prototype.ngOnInit=function(){console.log("Favoritos list component cargado"),this.getAlbums()},t.prototype.getAlbums=function(){var t=this;this.albumService.getAlbums().subscribe(function(e){console.log("list Albums initial value ",t.listAlbums),console.log(e),t.listAlbums=e.albums,t.loading_effect(),console.log("list Albums database value ",t.listAlbums),t.listAlbums||console.error("error en el servidor")},function(e){t.errorMessage=e,null!=t.errorMessage&&console.log(t.errorMessage)})},t.prototype.deleteAlbum=function(t){var e=this;this.albumService.deleteFavorito(t).subscribe(function(t){t.message||console.error("error en el servidor"),console.log(t),e.getAlbums()},function(t){e.errorMessage=t,null!=e.errorMessage&&console.log(e.errorMessage)})},t.prototype.cancelarSupresion=function(t){this.selected=t+"om"},t.prototype.confirmAction=function(t){this.selected=t},t.prototype.loading_effect=function(){var t=this;setTimeout(function(){console.log("Hello from setTimeout"),t.isLoading=!1},600)},t}();s=i([n.i(o._10)({selector:"app-album-list",template:n("C6/o"),styles:[n("agOx")],providers:[r.a]}),c("design:paramtypes",["function"==typeof(a=void 0!==r.a&&r.a)&&a||Object])],s);var a},0:function(t,e,n){t.exports=n("x35b")},"0SX9":function(t,e){t.exports='<div class="col-sm-6 col-sm-offset-3" style="padding:15px; margin-top:25px;">\n  <form #formAlbum="ngForm" (ngSubmit)="register()">\n  <div class="form-group">\n    <label for="title">Titulo</label>\n    <input type="text" name="title" #title="ngModel" [(ngModel)]="album.title" class="form-control" required>\n    <span *ngIf="!title.valid && title.touched">Este campo es obligatorio</span>\n  </div>\n  <div class="form-group">\n    <label for="description">Descripción</label>\n    <input type="text" name="description" #description="ngModel" [(ngModel)]="album.description"  class="form-control" required>\n    <span *ngIf="!description.valid && description.touched">Este campo es obligatorio</span>\n  </div>\n  <br>\n  <button type="submit" class="btn btn-success" [disabled]="!formAlbum.form.valid">Enviar</button>\n</form>\n</div>\n'},"0sNM":function(t,e){t.exports='<h4>Edicíón de la imagen</h4>\n<div class="col-sm-6 col-sm-offset-3" style="padding:15px; margin-top:25px;">\n  <form #formPciture="ngForm" (ngSubmit)="register()">\n  <div class="form-group">\n    <label for="title">Titulo</label>\n    <input type="text" name="title" #title="ngModel" [(ngModel)]="picture.title" class="form-control" required>\n    <span *ngIf="!title.valid && title.touched">Este campo es obligatorio</span>\n  </div>\n  <div class="form-group">\n    <input type="file" placeholder="Select your file" (change)="fileChangeEvent($event)">\n  </div>\n  <br>\n  <button type="submit" class="btn btn-success" [disabled]="!formPciture.form.valid">Enviar</button>\n</form>\n</div>\n'},"5xMp":function(t,e){t.exports='\x3c!-- Root Component --\x3e\n<header>\n  <div class="col-sm-2">\n    <a [routerLink]="[\'/\']">\n      <img src="assets/media/angular.png" alt="angular2" height="90">\n    </a>\n  </div>\n  <div class="col-sm-8 text-left" style="padding:0px; border-top: 1px solid white; border-bottom: 1px solid white;">\n    <h3>{{title}}</h3>\n    <p>{{description}}</p>\n  </div>\n  <div class="col-sm-2 text-center" style="position:relative; top:25%;">\n    <button [routerLink]="[\'crear.album\']" type="button" class="btn btn-info">Crear Album</button>\n  </div>\n</header>\n\n<section class="main" style="overflow:scroll; height:380px;">\n  \x3c!-- MOSTRAMOS EL COMPONENTE LIST --\x3e\n  \x3c!-- <favoritos-list></favoritos-list>--\x3e\n  <router-outlet></router-outlet>\n</section>\n\n\n\n\n\n<div class="footer navbar-fixed-bottom text-center">\n  <span>&copy; Curso de NodeJS y Angular2</span>\n</div>\n'},"62ZL":function(t,e){t.exports='<div id="albumDetails" class="col-sm-10 col-sm-offset-1">\n  <div *ngIf="album;" style="padding:20px;">\n    <b>{{album.title}}</b>\n    <p>{{album.description}}</p>\n    <div class="col.sm-12 text-left">\n      <button [routerLink]="[\'/add.picture\',album._id]" type="button" class="btn btn-info btn-sm">Añadir Fotos</button>\n    </div>\n  </div>\n</div>\n\n<div class="col-sm-12 text-center" *ngIf="pictures" style="margin-top:20px;">\n  <div class="col-sm-4 text-center" *ngFor="let item of pictures" style="border:1px solid violet;">\n    <img src="{{api_url + item.picture}}" height="120">\n    <p><strong>{{item.title}}</strong></p>\n    <button [routerLink]="[\'/show.picture\',item._id]" type="button" class="btn btn-primary btn-sm">Ver Imagen</button>\n  </div>\n</div>\n'},"C6/o":function(t,e){t.exports='<div class="loading" [hidden]="!isLoading">\n <div class="centered">\n      <sk-three-bounce></sk-three-bounce>\n   </div>\n</div>\n<div class="row" style="margin:0px; margin-top:20px;" >\n  <div class="col-sm-10 col-sm-offset-1" *ngFor="let album of listAlbums" style="margin-top:20px;">\n    <div class="card myCard">\n        <div class="card-block" *ngIf="selected != album._id">\n          <h3 class="card-title" style="margin-top:0px;">{{album.title}}</h3>\n          <p class="card-text">{{album.description}}</p>\n          <button [routerLink]="[\'/add.picture\',album._id]" type="button" class="btn btn-info btn-sm">Añadir Fotos</button>\n          <button [routerLink]="[\'/show.album\',album._id]" type="button" class="btn btn-primary btn-sm">Ver</button>\n          <button [routerLink]="[\'/edit.album\',album._id]" type="button" class="btn btn-success btn-sm">Editar</button>\n          <button (click)="confirmAction(album._id)" type="button" class="btn btn-danger btn-sm">Eliminar</button>\n      </div>\n      <div class="col-sm-12" *ngIf="selected == album._id" style="margin-top:10px;">\n          <p><strong>¿Realmente quieres eliminar el album?</strong></p>\n          <button  type="button" (click)="deleteAlbum(album._id)" class="btn btn-danger btn-sm">Confirmar Borrado</button>\n          <button  type="button" (click)="cancelarSupresion(album._id)" class="btn btn-info btn-sm">Cancelar</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},EVA8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={backendUrl:"https://gentle-shelf-63463.herokuapp.com/api"}},"IU+h":function(t,e,n){"use strict";var o=n("3j3K"),r=n("so41"),i=n("aKqg"),c=n("Nayf"),s=n("5oXY");n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n,o){this.albumService=t,this.pictureService=e,this.route=n,this.router=o}return t.prototype.ngOnInit=function(){this.album=new r.a("",""),this.api_url=this.pictureService.getApiUrl("/getFile/"),this.getAlbum()},t.prototype.getAlbum=function(){var t=this;this.route.params.forEach(function(e){var n=e.id;t.albumService.getAlbum(n).subscribe(function(e){console.log("Album initial value ",t.album),t.album=e.album,console.log("this.album",t.album),t.pictureService.getPictures(e.album._id).subscribe(function(e){t.pictures=e.pictures,console.log(t.pictures),t.pictures||console.log("galeria vacia")},function(e){t.errorMessage=e,null!=t.errorMessage&&console.log(t.errorMessage)}),t.album||(console.error("error en el servidor, redireccion a home component"),t.router.navigate(["/"]))},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t}();l=a([n.i(o._10)({selector:"app-show-album",template:n("62ZL"),styles:[n("pw2+")],providers:[i.a,c.a]}),u("design:paramtypes",["function"==typeof(p=void 0!==i.a&&i.a)&&p||Object,"function"==typeof(f=void 0!==c.a&&c.a)&&f||Object,"function"==typeof(d=void 0!==s.b&&s.b)&&d||Object,"function"==typeof(b=void 0!==s.c&&s.c)&&b||Object])],l);var p,f,d,b},Iksp:function(t,e,n){"use strict";var o=n("Qbdm"),r=n("3j3K"),i=n("NVOs"),c=n("Fzro"),s=n("X/3Z"),a=n("5oXY"),u=n("KBNt"),l=n("YWx4"),p=n("+3N3"),f=n("ecqD"),d=n("YNjV"),b=n("IU+h"),m=n("Kppd"),g=n("jjy4"),h=n("kHRX");n.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},y=function(){function t(){}return t}();y=v([n.i(r.b)({declarations:[l.a,p.a,f.a,d.a,b.a,m.a,g.a,h.a],imports:[o.a,i.a,c.a,u.a,a.a.forRoot(s.a)],providers:[],bootstrap:[l.a]})],y)},Kppd:function(t,e,n){"use strict";var o=n("3j3K"),r=n("UzTQ"),i=n("Nayf"),c=n("5oXY");n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.router=e,this.picture=new r.a,this.pictureService=t,this.route=n}return t.prototype.ngOnInit=function(){this.route.params.subscribe(function(t){var e=t.idAlbum;console.log("el id del album es : "+e)})},t.prototype.register=function(){var t=this;this.route.params.subscribe(function(e){var n=e.idAlbum;console.log("el id del album es : "+n),t.picture.album=n,console.log("sending this picture ",t.picture),t.pictureService.addPicture(t.picture).subscribe(function(e){console.log("result",e),e.picture?(console.log("redirection to edit picture..."),t.router.navigate(["edit.picture",e.picture._id])):alert("Error en el servidor")},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t}();u=s([n.i(o._10)({selector:"app-add-picture",template:n("hEjU"),styles:[n("vsWf")],providers:[i.a]}),a("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(p=void 0!==c.c&&c.c)&&p||Object,"function"==typeof(f=void 0!==c.b&&c.b)&&f||Object])],u);var l,p,f},MOVZ:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="MOVZ"},NIUk:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},Nayf:function(t,e,n){"use strict";var o=n("3j3K"),r=n("Fzro"),i=n("EVA8"),c=n("+pb+");n.n(c);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t){this.http=t,this.backendUrl=i.a.backendUrl}return t.prototype.addPicture=function(t){return this.http.post(this.backendUrl+"/picture/",t).map(function(t){return t.json()})},t.prototype.editPicture=function(t,e){return this.http.put(this.backendUrl+"/picture/"+t,e).map(function(t){return t.json()})},t.prototype.removePicture=function(t){return this.http.delete(this.backendUrl+"/picture/"+t).map(function(t){return t.json()})},t.prototype.getPictures=function(t){return t?this.http.get(this.backendUrl+"/pictures/"+t).map(function(t){return t.json()}):this.http.get(this.backendUrl+"/pictures").map(function(t){return t.json()})},t.prototype.getPicture=function(t){return this.http.get(this.backendUrl+"/picture/"+t).map(function(t){return t.json()})},t.prototype.getApiUrl=function(t){return i.a.backendUrl+t},t}();u=s([n.i(o.v)(),a("design:paramtypes",["function"==typeof(l=void 0!==r.b&&r.b)&&l||Object])],u);var l},PgKW:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},SOH4:function(t,e){t.exports='<div class="col-sm-6 col-sm-offset-3" style="padding:15px; margin-top:25px;">\n  <form #formAlbum="ngForm" (ngSubmit)="register()">\n  <div class="form-group">\n    <label for="title">Titulo</label>\n    <input type="text" name="title" #title="ngModel" [(ngModel)]="album.title" class="form-control" required>\n    <span *ngIf="!title.valid && title.touched">Este campo es obligatorio</span>\n  </div>\n  <div class="form-group">\n    <label for="description">Descripción</label>\n    <input type="text" name="description" #description="ngModel" [(ngModel)]="album.description"  class="form-control" required>\n    <span *ngIf="!description.valid && description.touched">Este campo es obligatorio</span>\n  </div>\n  <br>\n  <button type="submit" class="btn btn-success" [disabled]="!formAlbum.form.valid">Enviar</button>\n</form>\n</div>\n'},UzTQ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},W5dd:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"X/3Z":function(t,e,n){"use strict";var o=n("+3N3"),r=n("ecqD"),i=n("YNjV"),c=n("jjy4"),s=n("Kppd"),a=n("IU+h"),u=n("kHRX");n.d(e,"a",function(){return l});var l=[{path:"",component:o.a},{path:"crear.album",component:r.a},{path:"add.picture/:idAlbum",component:s.a},{path:"edit.picture/:idPicture",component:c.a},{path:"edit.album/:id",component:i.a},{path:"show.album/:id",component:a.a},{path:"show.picture/:id",component:u.a},{path:"**",component:o.a}]},YNjV:function(t,e,n){"use strict";var o=n("3j3K"),r=n("so41"),i=n("aKqg"),c=n("5oXY");n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.albumService=t,this.route=e,this.router=n}return t.prototype.ngOnInit=function(){this.album=new r.a("",""),this.getAlbum()},t.prototype.getAlbum=function(){var t=this;this.route.params.forEach(function(e){var n=e.id;t.albumService.getAlbum(n).subscribe(function(e){console.log("Album initial value ",t.album),t.album=e.album,console.log("this.favorito",t.album),t.album||(console.error("error en el servidor, redireccion a home component"),t.router.navigate(["/"]))},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t.prototype.register=function(){var t=this;this.route.params.forEach(function(e){var n=e.id;t.albumService.editAlbum(n,t.album).subscribe(function(e){console.log("result",e),t.router.navigate(["/show.album",n])},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t}();u=s([n.i(o._10)({selector:"app-edit-album",template:n("SOH4"),styles:[n("gR1W")],providers:[i.a]}),a("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(p=void 0!==c.b&&c.b)&&p||Object,"function"==typeof(f=void 0!==c.c&&c.c)&&f||Object])],u);var l,p,f},YWx4:function(t,e,n){"use strict";var o=n("3j3K");n.d(e,"a",function(){return c});var r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(){}return t.prototype.ngOnInit=function(){this.title="APICACIÓN ANGULAR 2",this.description="Aplicación para gestionar albums de imagenes"},t}();c=r([n.i(o._10)({selector:"app-root",template:n("5xMp"),styles:[n("okgc")]}),i("design:paramtypes",[])],c)},aKqg:function(t,e,n){"use strict";var o=n("3j3K"),r=n("Fzro"),i=n("EVA8"),c=n("+pb+");n.n(c);n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t){this.http=t,this.backendUrl=i.a.backendUrl}return t.prototype.getAlbums=function(){return this.http.get(this.backendUrl+"/albums").map(function(t){return t.json()})},t.prototype.getAlbum=function(t){return this.http.get(this.backendUrl+"/album/"+t).map(function(t){return t.json()})},t.prototype.addAlbum=function(t){return this.http.post(this.backendUrl+"/album/",t).map(function(t){return t.json()})},t.prototype.editAlbum=function(t,e){return this.http.put(this.backendUrl+"/album/"+t,e).map(function(t){return t.json()})},t.prototype.deleteFavorito=function(t){return this.http.delete(this.backendUrl+"/album/"+t).map(function(t){return t.json()})},t}();u=s([n.i(o.v)(),a("design:paramtypes",["function"==typeof(l=void 0!==r.b&&r.b)&&l||Object])],u);var l},agOx:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".myCard{background:#fff;box-shadow:0 3px 3px 3px #cecbcb;min-height:137px;border-radius:5px;padding:12px;border-top:14px solid #f3447c}.centered{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-80%);transform:translate(-50%,-80%)}.loading{height:100vh;z-index:5000;opacity:1;filter:alpha(opacity=100);background:#0f090a;position:fixed;top:0;width:80%}:host /deep/ .three-bounce-spinner{margin:100px auto 0;width:250px!important}:host /deep/ .three-bounce-spinner>div{width:27px!important;height:27px!important;background-color:#f9690e!important;margin-right:10px}",""]),t.exports=t.exports.toString()},ecqD:function(t,e,n){"use strict";var o=n("3j3K"),r=n("so41"),i=n("aKqg"),c=n("5oXY");n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.album=new r.a("",""),this.albumService=t,this.router=e}return t.prototype.ngOnInit=function(){this.getAlbum()},t.prototype.register=function(){var t=this;this.getAlbum(),console.log("album to string "+this.album),this.albumService.addAlbum(this.album).subscribe(function(e){console.log("result",e),t.router.navigate(["/",e.album._id])},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})},t.prototype.getAlbum=function(){this.album.get()},t}();u=s([n.i(o._10)({selector:"app-add-album",template:n("0SX9"),styles:[n("W5dd")],providers:[i.a]}),a("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(p=void 0!==c.c&&c.c)&&p||Object])],u);var l,p},gR1W:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},hEjU:function(t,e){t.exports='<div class="col-sm-6 col-sm-offset-3" style="padding:15px; margin-top:25px;">\n  <form #formPciture="ngForm" (ngSubmit)="register()">\n  <div class="form-group">\n    <label for="title">Titulo</label>\n    <input type="text" name="title" #title="ngModel" [(ngModel)]="picture.title" class="form-control" required>\n    <span *ngIf="!title.valid && title.touched">Este campo es obligatorio</span>\n  </div>\n  <br>\n  <button type="submit" class="btn btn-success" [disabled]="!formPciture.form.valid">Añadir imagen</button>\n</form>\n</div>\n'},jjy4:function(t,e,n){"use strict";var o=n("3j3K"),r=n("UzTQ"),i=n("Nayf"),c=n("5oXY"),s=n("EVA8");n.d(e,"a",function(){return l});var a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this.pictureService=t,this.route=e,this.router=n}return t.prototype.ngOnInit=function(){this.picture=new r.a,this.getPicture()},t.prototype.getPicture=function(){var t=this;this.route.params.forEach(function(e){var n=e.idPicture;t.pictureService.getPicture(n).subscribe(function(e){console.log("Picture initial value ",t.picture),t.picture=e.picture,t.idAlbum=e.picture.album._id,console.log("this.picture",t.picture),t.picture||(console.error("error en el servidor, redireccion a home component"),t.router.navigate(["/"]))},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t.prototype.register=function(){var t=this;this.route.params.subscribe(function(e){var n=e.idPicture;console.log("el id de la imagen es : "+n),console.log("sending this picture ",t.picture),t.pictureService.editPicture(n,t.picture).subscribe(function(e){console.log("result",e),e.picture?(console.log("uploading picture ..."),t.makeFileRequest(s.a.backendUrl+"/uploadPicture/"+n,[],t.filesToUpload).then(function(e){t.resultUpload=e,t.picture.picture=t.resultUpload.filename},function(t){console.log(t)})):alert("Error en el servidor"),t.router.navigate(["show.album",t.idAlbum])},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t.prototype.fileChangeEvent=function(t){this.filesToUpload=t.target.files},t.prototype.makeFileRequest=function(t,e,n){return new Promise(function(e,o){for(var r=new FormData,i=new XMLHttpRequest,c=0;c<n.length;c++)r.append("picture",n[c],n[c].name);i.onreadystatechange=function(){4==i.readyState&&(200==i.status?e(JSON.parse(i.response)):o(i.response))},i.open("POST",t,!0),i.send(r)})},t}();l=a([n.i(o._10)({selector:"app-edit-picture",template:n("0sNM"),styles:[n("PgKW")],providers:[i.a]}),u("design:paramtypes",["function"==typeof(p=void 0!==i.a&&i.a)&&p||Object,"function"==typeof(f=void 0!==c.b&&c.b)&&f||Object,"function"==typeof(d=void 0!==c.c&&c.c)&&d||Object])],l);var p,f,d},kHRX:function(t,e,n){"use strict";var o=n("3j3K"),r=n("UzTQ"),i=n("Nayf"),c=n("5oXY");n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.pictureService=t,this.route=e,this.router=n}return t.prototype.ngOnInit=function(){this.picture=new r.a,this.api_url=this.pictureService.getApiUrl("/getFile/"),this.getPicture()},t.prototype.deletePicture=function(t){var e=this;this.pictureService.removePicture(t).subscribe(function(t){t.message||console.error("error en el servidor"),console.log(t),e.getPicture()},function(t){e.errorMessage=t,null!=e.errorMessage&&console.log(e.errorMessage)})},t.prototype.cancelarSupresion=function(t){this.selected=t+"om"},t.prototype.confirmAction=function(t){this.selected=t},t.prototype.getPicture=function(){var t=this;this.route.params.forEach(function(e){var n=e.id;t.pictureService.getPicture(n).subscribe(function(e){console.log("picture initial value ",t.picture),t.picture=e.picture,console.log("this.picture",t.picture),t.picture||(console.error("error en el servidor, redireccion a home component"),t.router.navigate(["/"]))},function(e){t.errorMessage=e,null!=t.errorMessage&&(console.log(t.errorMessage),alert("error en la petición"))})})},t}();u=s([n.i(o._10)({selector:"app-show-picture",template:n("kZQh"),styles:[n("NIUk")],providers:[i.a]}),a("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(p=void 0!==c.b&&c.b)&&p||Object,"function"==typeof(f=void 0!==c.c&&c.c)&&f||Object])],u);var l,p,f},kZQh:function(t,e){t.exports='<div class="" *ngIf="picture">\n  <div class="col-sm-12" *ngIf="selected != picture._id">\n    <button [routerLink]="[\'/show.album\',picture.album._id]" type="button" class="btn btn-primary btn-sm">Volver</button>\n    <button [routerLink]="[\'/edit.picture\',picture._id]" type="button" class="btn btn-success btn-sm">Editar</button>\n    <button (click)="confirmAction(picture._id)" type="button" class="btn btn-danger btn-sm">Eliminar</button>\n    <h1>{{picture.title}}</h1>\n  </div>\n  <div class="col-sm-12" *ngIf="selected == picture._id" style="margin-top:10px;">\n      <p><strong>¿Realmente quieres eliminar el album?</strong></p>\n      <button  type="button" (click)="deletePicture(picture._id)" class="btn btn-danger btn-sm">Confirmar Borrado</button>\n      <button  type="button" (click)="cancelarSupresion(picture._id)" class="btn btn-info btn-sm">Cancelar</button>\n  </div>\n\n  <img src="{{api_url + picture.picture}}" height="120">\n\n</div>\n'},kZql:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},okgc:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"header{background:#8e44ad;color:#ecf0f1;height:150px;padding:20px}header>h2{margin:0}.footer{color:grey;height:80px}",""]),t.exports=t.exports.toString()},"pw2+":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"#albumDetails{background:#fff;margin-top:20px;border-left:10px solid #ffcf00;border-radius:5px;box-shadow:5px 5px 5px 0 #dedede}",""]),t.exports=t.exports.toString()},so41:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){this.title=this.capitalize(t),this.description=e}return t.prototype.capitalize=function(t){return console.log("capitalizing..."+t),t.toUpperCase()},t.prototype.get=function(){console.log(this.title,this.description)},t.prototype.toString=function(){return"the title : "+this.title+" and the description "+this.description},t}()},vsWf:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("3j3K"),r=n("O61y"),i=n("Iksp");n("kZql").a.production&&n.i(o.a)(),n.i(r.a)().bootstrapModule(i.a)}},[0]);